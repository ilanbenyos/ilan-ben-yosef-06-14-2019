(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{45:function(e,t,a){e.exports=a(85)},83:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),i=a(16),o=a(17),s=a(19),u={favorites:[],articles:[],userName:"",board:null,score:0};var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;return"INIT_FAVORITES"===t.type?Object(s.a)({},e,{favorites:t.payload}):"SAVE_FAVORITES"===t.type?(localStorage.setItem("favorites",JSON.stringify(t.payload)),Object(s.a)({},e,{favorites:t.payload})):e},m=a(44);var p=a(41),d=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,f=Object(o.d)(l,d(Object(o.a)(function(e){var t=e.dispatch;return function(e){return function(a){if("addToFavorites"===a.type){var n=localStorage.getItem("favorites");if(!(n=n?JSON.parse(n):[]).find(function(e){return e.id===a.payload.id})){var r=new Set(n);return r.add(a.payload),n=Object(m.a)(r),t({type:"SAVE_FAVORITES",payload:n})}}return e(a)}}},function(e){var t=e.dispatch;return function(e){return function(a){if("initFavorites"===a.type){var n=localStorage.getItem("favorites");return n=n?JSON.parse(n):[],t({type:"INIT_FAVORITES",payload:n})}e(a)}}},function(e){var t=e.dispatch,a=e.getState;return function(e){return function(n){if("removeFromFavorites"===n.type){var r=a().favorites,c=r.findIndex(function(e){return e.id===n.payload.id});if(c>-1)return r.splice(c,1),t({type:"SAVE_FAVORITES",payload:r})}e(n)}}},p.a))),v=a(9),h=a(10),b=a(13),y=a(11),E=a(12),O=a(21),j=a(14),F=a(2),N=a.n(F),g=a(15),k=a(25),S=a.n(k),w=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e))).handleClick=function(){var e=a.props.searchRes.city,t=e.name,n=e.id;a.props.isFavorite?a.props.removeFromFavorites({id:n}):a.props.addToFavorites({name:t,id:n})},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"computedData",value:function(){var e=this.props.searchRes.list.map(function(e,t){var a=new Date(1e3*e.dt),n="".concat(("0"+a.getHours()).slice(-2),":").concat(("0"+a.getMinutes()).slice(-2)),r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][a.getDay()],c=a.getMonth(),i="".concat(a.getDate(),"/").concat(c);return{temp:"".concat(Math.floor(e.main.temp-273)," C"),time:n,dayOfWeek:r,month:c,date:i,description:e.weather[0].description}});return e=e.map(function(t,a){var n=0===a||e[a-1].dayOfWeek!==t.dayOfWeek;return Object(s.a)({},t,{isFirstOfDate:n})})}},{key:"render",value:function(){var e=this.props.searchRes;if(!e)return r.a.createElement("div",{className:"city-name"},"NO DATA");var t=this.computedData().map(function(e,t){return r.a.createElement("div",{key:t,className:"item d-flex flex-column"},e.isFirstOfDate?r.a.createElement("h4",{className:"upper mt-2 text-primary"}," ",e.date," - ",e.dayOfWeek," "):null,r.a.createElement("div",{className:"bottom d-flex"},r.a.createElement("div",{className:"dt mr-2"}," ",e.time," "),r.a.createElement("div",{className:"temp mr-2"}," ",e.temp," "),r.a.createElement("div",{className:"desc mr-2"},e.description)))});return r.a.createElement("div",{className:"city-res mt-3"},r.a.createElement("h3",{className:"city-name text-center"},e.city.name),this.props.isFavorite?r.a.createElement("div",{className:"d-flex justify-content-between align-center"},r.a.createElement("button",{className:"btn btn-outline-info d-flex align-center",onClick:this.handleClick}," Remove from favorites",r.a.createElement("i",{className:"material-icons text-danger ml-3"}," favorite "))):r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("button",{onClick:this.handleClick,className:"btn btn-outline-info d-flex align-center"}," Add to favorites",r.a.createElement("i",{className:"material-icons text-danger ml-3"}," favorite "))),t)}}]),t}(r.a.Component);function x(e){return{type:"initFavorites",payload:e}}var T=a(42),C=a.n(T);var I=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e))).removeFromFavorites=function(e){a.props.removeFromFavorites(e),a.setState({search:""})},a.addToFavorites=function(e){var t=e.name,n=e.id;a.props.addToFavorites({name:t,id:n}),a.setState({search:""})},a.submitSearch=Object(g.a)(N.a.mark(function e(){var t,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.state.search,n="?q=".concat(t),a.pushSearch(n);case 3:case"end":return e.stop()}},e)})),a.submitSearchLocation=Object(g.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation.getCurrentPosition(function(){var e=Object(g.a)(N.a.mark(function e(t){var n,r,c;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.coords.latitude,r=t.coords.longitude,c="?lat=".concat(n,"&lon=").concat(r),a.pushSearch(c);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e)})),a.handleChange=function(e){a.setState({search:e.target.value})},a.state={search:C.a.parse(a.props.location.search).city||"tel aviv",searchRes:null},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"isFavorite",value:function(){var e=this;return!!this.state.searchRes&&!!this.props.favorites.find(function(t){return t.id===e.state.searchRes.city.id})}},{key:"componentDidMount",value:function(){this.props.initFavorites(),this.submitSearch()}},{key:"pushSearch",value:function(){var e=Object(g.a)(N.a.mark(function e(t){var a,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"e4063054bda92f3ca54619eb59a22adf","https://api.openweathermap.org/data/2.5/forecast",a="".concat("https://api.openweathermap.org/data/2.5/forecast").concat(t,"&APPID=").concat("e4063054bda92f3ca54619eb59a22adf"),e.next=5,S.a.get(a);case 5:n=e.sent,this.setState({searchRes:n.data}),this.props.history.push({pathname:"/",search:"?city=".concat(this.state.searchRes.city.name)}),this.setState({search:this.state.searchRes.city.name});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"row mt-5 pb-5"},r.a.createElement("div",{className:"col-12 col-md-6 col-lg-4"},r.a.createElement("input",{type:"text",className:"form-control",value:this.state.search,onChange:this.handleChange}),r.a.createElement("div",{className:"panel mt-2  d-flex "},r.a.createElement("button",{className:"btn btn-success mr-2",onClick:this.submitSearch},"Search"),r.a.createElement("button",{className:"btn btn-primary d-flex align-center",onClick:this.submitSearchLocation},"Search By Location",r.a.createElement("i",{className:"material-icons text-danger ml-3"}," location_on "))),r.a.createElement("div",{className:"result"},r.a.createElement(w,{searchRes:this.state.searchRes,removeFromFavorites:this.removeFromFavorites,addToFavorites:this.addToFavorites,isFavorite:this.isFavorite()}))))}}]),t}(r.a.Component),R=Object(i.b)(function(e){return{favorites:e.favorites}},function(e){return{initFavorites:function(){return e(x())},removeFromFavorites:function(t){return e({type:"removeFromFavorites",payload:t})},addToFavorites:function(t){return e({type:"addToFavorites",payload:t})}}})(I),A=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"about"},r.a.createElement("h1",null,"About"),r.a.createElement("p",null," Here will come the about page and other stuff"))}}]),t}(r.a.Component);var D=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e))).state={favoritesObj:null},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(N.a.mark(function e(){var t,a,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.initFavorites();case 2:return"e4063054bda92f3ca54619eb59a22adf","https://api.openweathermap.org/data/2.5/weather",t=this.props.favorites.map(function(){var e=Object(g.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("https://api.openweathermap.org/data/2.5/weather","?id=").concat(t.id,"&APPID=").concat("e4063054bda92f3ca54619eb59a22adf"),e.abrupt("return",S.a.get(a));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=7,Promise.all(t);case 7:a=e.sent,n=a.map(function(e){return e.data}),this.setState({favoritesObj:n});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"pushToCity",value:function(e){this.props.history.push({pathname:"/",search:"?city=".concat(e)})}},{key:"getItems",value:function(){var e=this,t=this.state.favoritesObj;return t?t.map(function(t,a){return r.a.createElement("div",{key:a,className:"list-group-item list-group-item-action rol-btn",onClick:function(){return e.pushToCity(t.name)}},r.a.createElement("h5",{className:"name mr-2 text-center text-success"},t.name),r.a.createElement("div",{className:"bottom d-flex justify-content-between align-center"},r.a.createElement("div",{className:"temp"},Math.floor(t.main.temp-273)," C"),r.a.createElement("div",{className:"description mr-2"},t.weather[0].description)))}):[]}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h3",{className:"my-favorites text-primary mb-3"},"My Favorites"),r.a.createElement("div",{className:"list-group"},this.getItems()))}}]),t}(r.a.Component),_=Object(i.b)(function(e){return{favorites:e.favorites}},function(e){return{initFavorites:function(){return e(x())}}})(D),M=(a(83),function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(y.a)(t).call(this,e))).state={},a}return Object(E.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Herolo Test"),r.a.createElement("div",{className:"navbar-nav mr-auto d-flex flex-row"},r.a.createElement(O.b,{to:"/",className:"nav-link mr-2"},"Home"),r.a.createElement(O.b,{to:{pathname:"/favorites"},className:"nav-link mr-2"},"Favorites"),r.a.createElement(O.b,{to:"/about",className:"nav-link"},"About")),r.a.createElement("hr",null),r.a.createElement(j.c,null,r.a.createElement(j.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(R,e)}}),r.a.createElement(j.a,{path:"/favorites/",component:_}),r.a.createElement(j.a,{path:"/about",component:A}))))}}]),t}(n.Component));Object(c.render)(r.a.createElement(i.a,{store:f},r.a.createElement(M,null)),document.getElementById("app"))}},[[45,1,2]]]);
//# sourceMappingURL=main.528bb238.chunk.js.map